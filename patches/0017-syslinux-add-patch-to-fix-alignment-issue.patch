From fce7ca7fe310537b41f113143a64879eebb07229 Mon Sep 17 00:00:00 2001
From: Frank Hunleth <fhunleth@troodon-software.com>
Date: Tue, 19 Apr 2016 21:15:27 -0400
Subject: [PATCH] syslinux: add patch to fix alignment issue

---
 .../0001-Fix-gcc-5-ALIGN-causing-Boot-error.patch  | 75 ++++++++++++++++++++++
 1 file changed, 75 insertions(+)
 create mode 100644 boot/syslinux/0001-Fix-gcc-5-ALIGN-causing-Boot-error.patch

diff --git a/boot/syslinux/0001-Fix-gcc-5-ALIGN-causing-Boot-error.patch b/boot/syslinux/0001-Fix-gcc-5-ALIGN-causing-Boot-error.patch
new file mode 100644
index 0000000..86626f9
--- /dev/null
+++ b/boot/syslinux/0001-Fix-gcc-5-ALIGN-causing-Boot-error.patch
@@ -0,0 +1,75 @@
+commit e5f2b577ded109291c9632dacb6eaa621d8a59fe
+Author: Sylvain Gault <sylvain.gault@gmail.com>
+Date:   Tue Sep 29 02:38:25 2015 +0200
+
+    bios: Fix alignment change with gcc 5
+    
+    The section aligment specified in the ld scripts have to be greater or
+    equal to those in the .o files generated by gcc.
+    
+    Signed-off-by: Sylvain Gault <sylvain.gault@gmail.com>
+    Tested-by: poma <pomidorabelisima@gmail.com>
+    Signed-off-by: Paulo Alcantara <pcacjr@zytor.com>
+
+diff --git a/core/i386/syslinux.ld b/core/i386/syslinux.ld
+index 7b4e012..7390451 100644
+--- a/core/i386/syslinux.ld
++++ b/core/i386/syslinux.ld
+@@ -266,7 +266,7 @@ SECTIONS
+ 		__text_end = .;
+ 	}
+ 
+-	. = ALIGN(16);
++	. = ALIGN(32);
+ 
+ 	__rodata_vma = .;
+ 	__rodata_lma = __rodata_vma + __text_lma - __text_vma;
+@@ -361,7 +361,7 @@ SECTIONS
+ 		__dynamic_end = .;
+ 	}
+ 
+-	. = ALIGN(16);
++	. = ALIGN(32);
+ 
+ 	__data_vma = .;
+ 	__data_lma = __data_vma + __text_lma - __text_vma;
+@@ -377,7 +377,7 @@ SECTIONS
+ 	__pm_code_dwords = (__pm_code_len + 3) >> 2;
+ 
+ 	. = ALIGN(128);
+-	
++
+ 	__bss_vma = .;
+ 	__bss_lma = .;		/* Dummy */
+ 	.bss (NOLOAD) : AT (__bss_lma) {
+diff --git a/core/x86_64/syslinux.ld b/core/x86_64/syslinux.ld
+index 1057112..bf815c4 100644
+--- a/core/x86_64/syslinux.ld
++++ b/core/x86_64/syslinux.ld
+@@ -266,7 +266,7 @@ SECTIONS
+ 		__text_end = .;
+ 	}
+ 
+-	. = ALIGN(16);
++	. = ALIGN(32);
+ 
+ 	__rodata_vma = .;
+ 	__rodata_lma = __rodata_vma + __text_lma - __text_vma;
+@@ -361,7 +361,7 @@ SECTIONS
+ 		__dynamic_end = .;
+ 	}
+ 
+-	. = ALIGN(16);
++	. = ALIGN(32);
+ 
+ 	__data_vma = .;
+ 	__data_lma = __data_vma + __text_lma - __text_vma;
+@@ -377,7 +377,7 @@ SECTIONS
+ 	__pm_code_dwords = (__pm_code_len + 3) >> 2;
+ 
+ 	. = ALIGN(128);
+-	
++
+ 	__bss_vma = .;
+ 	__bss_lma = .;		/* Dummy */
+ 	.bss (NOLOAD) : AT (__bss_lma) {
-- 
2.5.0

